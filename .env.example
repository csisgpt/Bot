# =========================
# App
# =========================
NODE_ENV=production
APP_NAME=crypto-signals-bot
TZ=UTC
LOG_LEVEL=info

# API & Worker ports
PORT=3000
WORKER_PORT=3001

# =========================
# Database (PostgreSQL)
# =========================
# Example:
# DATABASE_URL=postgresql://user:pass@host:5432/dbname?sslmode=disable
DATABASE_URL=
PRISMA_LOG_LEVEL=info

# =========================
# Redis
# =========================
# Prefer REDIS_URL. If empty, set REDIS_HOST/REDIS_PORT.
# Example:
# REDIS_URL=redis://:password@host:6379/0
REDIS_URL=
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# =========================
# BullMQ / Queue
# =========================
QUEUE_SIGNALS_NAME=signals
QUEUE_CONCURRENCY=5

# Retry/Backoff for telegram send jobs
SIGNALS_TELEGRAM_JOB_ATTEMPTS=5
SIGNALS_TELEGRAM_JOB_BACKOFF_DELAY_MS=3000
SIGNALS_TELEGRAM_JOB_PRIORITY=1

# =========================
# Telegram
# =========================
TELEGRAM_BOT_TOKEN=
TELEGRAM_BOT_ID=
TELEGRAM_BOT_USERNAME=
TELEGRAM_USE_POLLING=false
TELEGRAM_WEBHOOK_URL=
TELEGRAM_WEBHOOK_SECRET=
TELEGRAM_ADMIN_ONLY_GROUP_SETTINGS=true

# Optional owner/admin info
TELEGRAM_OWNER_USER_ID=
TELEGRAM_OWNER_USERNAME=
OWNER_USER_ID=
ADMIN_TEST_TOKEN=

# Targets
TELEGRAM_SIGNAL_CHANNEL_ID=
TELEGRAM_SIGNAL_CHANNEL_USERNAME=
TELEGRAM_SIGNAL_CHANNEL_TITLE=
TELEGRAM_SIGNAL_GROUP_ID=
TELEGRAM_SIGNAL_GROUP_TITLE=

# Telegram message settings
TELEGRAM_PARSE_MODE=HTML
TELEGRAM_DISABLE_WEB_PAGE_PREVIEW=true

# =========================
# Assets / Instruments
# =========================
# CSV list: GOLD,CRYPTO
ASSETS_ENABLED=GOLD,CRYPTO

# CSV list of instruments
GOLD_INSTRUMENTS=PAXGUSDT
CRYPTO_INSTRUMENTS=BTCUSDT,ETHUSDT
DEFAULT_TIMEFRAMES=5m,15m
MONITORING_ENABLED=true
UNIVERSE_DEFAULT_SYMBOLS=BTCUSDT,ETHUSDT,XAUTUSDT
UNIVERSE_MAX_SYMBOLS=100

# Optional override
BINANCE_SYMBOLS=

# =========================
# Price providers & ticker
# =========================
# Allowed examples: BINANCE_SPOT, BINANCE_FUTURES, MANUAL
PRICE_PROVIDER_GOLD=BINANCE_SPOT
PRICE_PROVIDER_CRYPTO=BINANCE_SPOT

PRICE_INGEST_ENABLED=true
PRICE_TICKER_ENABLED=false
PRICE_TICKER_POST_SECONDS=30
PRICE_TICKER_INSTRUMENTS=PAXGUSDT
PRICE_TICKER_POST_TO_GROUP=true
PRICE_TICKER_POST_TO_CHANNEL=true

# Market data ingest / aggregation
CANDLE_INGEST_ENABLED=true
CANDLE_INGEST_INTERVAL_SECONDS=60
CANDLE_INGEST_CONCURRENCY=5
CANDLE_AGGREGATE_ENABLED=true
CANDLE_AGGREGATE_CONCURRENCY=5
AGG_TIMEFRAMES=5m,15m

# =========================
# Binance REST
# =========================
BINANCE_BASE_URL=https://data-api.binance.vision
BINANCE_INTERVAL=15m
BINANCE_KLINES_LIMIT=200
BINANCE_REQUEST_TIMEOUT_MS=10000

# =========================
# Strategies
# =========================
# CSV list
STRATEGIES_ENABLED=ema_rsi,rsi_threshold,breakout,macd

EMA_FAST_PERIOD=12
EMA_SLOW_PERIOD=26

RSI_PERIOD=14
RSI_BUY_THRESHOLD=30
RSI_SELL_THRESHOLD=70

BREAKOUT_LOOKBACK=20

MACD_FAST_PERIOD=12
MACD_SLOW_PERIOD=26
MACD_SIGNAL_PERIOD=9

# Risk levels
ENABLE_RISK_LEVELS=true
ATR_PERIOD=14
SL_ATR_MULTIPLIER=1.5
TP1_ATR_MULTIPLIER=2
TP2_ATR_MULTIPLIER=3

# Dedupe & cooldown
SIGNAL_DEDUPE_TTL_SECONDS=7200
SIGNAL_MIN_COOLDOWN_SECONDS=1

# =========================
# Digest / Reports
# =========================
DIGEST_TIME_UTC=20:00
DIGEST_ENABLED=true
DIGEST_POST_TO_GROUP=true
DIGEST_POST_TO_CHANNEL=false

# =========================
# TradingView Webhook
# =========================
TRADINGVIEW_WEBHOOK_ENABLED=true
TRADINGVIEW_WEBHOOK_SECRET=change-me

# When true, bypass some dedupe behaviour
TRADINGVIEW_SEND_ALL=false

TRADINGVIEW_DEFAULT_ASSET_TYPE=GOLD
TRADINGVIEW_DEFAULT_INSTRUMENT=XAUTUSDT
TRADINGVIEW_DEFAULT_INTERVAL=1s
TRADINGVIEW_DEFAULT_STRATEGY=tradingview

# Optional fallback timeout for price fetch when ingesting alerts
TRADINGVIEW_PRICE_FALLBACK_TIMEOUT_MS=2000

# =========================
# Webhook security
# =========================
WEBHOOK_MAX_BODY_KB=64
RATE_LIMIT_WEBHOOK_RPM=60

# =========================
# TradingView Email (optional)
# =========================
TRADINGVIEW_EMAIL_ENABLED=false
TRADINGVIEW_IMAP_HOST=
TRADINGVIEW_IMAP_USER=
TRADINGVIEW_IMAP_PORT=993
TRADINGVIEW_IMAP_SECURE=true
TRADINGVIEW_IMAP_PASS=
TRADINGVIEW_EMAIL_FOLDER=INBOX
TRADINGVIEW_EMAIL_POLL_SECONDS=30

# =========================
# Proxy (optional)
# =========================
HTTP_PROXY=
HTTPS_PROXY=
ALL_PROXY=

# Can be comma separated or single string
NO_PROXY=localhost,127.0.0.1,binance.com,binance.vision

# =========================
# Binance WebSocket (optional)
# =========================
BINANCE_WS_ENABLED=false
BINANCE_WS_BASE_URL=wss://stream.binance.com:9443

# =========================
# Runtime flags
# =========================
RUN_API=true
RUN_WORKER=false
MIGRATE_ON_START=false

# =========================
# Render keepalive (optional)
# =========================
RENDER_KEEPALIVE_ENABLED=false
RENDER_KEEPALIVE_URL=
